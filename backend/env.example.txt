# ============================================
# InvoiceMe Backend - Environment Configuration
# ============================================
# Rename this file to .env and fill in the values
# See SETUP_GUIDE.md for detailed instructions

# ============================================
# DATABASE
# ============================================
# PostgreSQL connection string
# 
# Option 1: Supabase (Recommended for sharing)
#   Get from: Supabase Dashboard → Settings → Database → Connection string
#   DATABASE_URL="postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres"
#
# Option 2: Local PostgreSQL
#   DATABASE_URL="postgresql://postgres:password@localhost:5432/invoiceme"
#
# Option 3: Neon (Free tier)
#   DATABASE_URL="postgresql://user:pass@ep-xxx.us-east-1.aws.neon.tech/neondb"
DATABASE_URL="postgresql://postgres:your-password@localhost:5432/invoiceme?schema=public"

# ============================================
# SUPABASE AUTH
# ============================================
# Get all from: https://app.supabase.com/project/[project-id]/settings/api

# Project URL (under "Project URL")
SUPABASE_URL="https://your-project-ref.supabase.co"

# anon/public key (under "Project API keys")
SUPABASE_ANON_KEY="eyJ..."

# service_role key (click "Reveal" under "Project API keys")
# ⚠️ NEVER expose this in frontend code
SUPABASE_SERVICE_ROLE_KEY="eyJ..."

# JWT Secret (under "JWT Settings" → "JWT Secret")
JWT_SECRET="your-supabase-jwt-secret"

# ============================================
# LLM SERVICE
# ============================================
# Choose ONE provider: ollama, groq, together, openrouter

# Provider selection
LLM_PROVIDER="ollama"

# --- Option 1: Ollama (Local/Self-hosted) ---
# No API key needed for local
OLLAMA_URL="http://localhost:11434"
OLLAMA_MODEL="llama3.2:3b"

# --- Option 2: Groq (Cloud - FREE tier, 14400 req/day) ---
# Get key: https://console.groq.com/keys
# LLM_PROVIDER="groq"
# LLM_API_KEY="gsk_..."
# LLM_MODEL="llama-3.2-3b-preview"

# --- Option 3: Together AI (Cloud - $25 credit) ---
# Get key: https://api.together.xyz/settings/api-keys
# LLM_PROVIDER="together"
# LLM_API_KEY="..."
# LLM_MODEL="meta-llama/Llama-3.2-3B-Instruct-Turbo"

# --- Option 4: OpenRouter (Cloud - Pay per use) ---
# Get key: https://openrouter.ai/keys
# LLM_PROVIDER="openrouter"
# LLM_API_KEY="sk-or-..."
# LLM_MODEL="meta-llama/llama-3.2-3b-instruct:free"

# ============================================
# OCR SERVICE
# ============================================
# Choose ONE provider: tesseract, google, ocrspace

# Provider selection
OCR_PROVIDER="tesseract"

# --- Option 1: Tesseract (Local) ---
# Install: brew install tesseract tesseract-lang (macOS)
#          apt install tesseract-ocr tesseract-ocr-heb (Ubuntu)
TESSERACT_LANGS="eng+heb"
# TESSERACT_PATH="/opt/homebrew/bin/tesseract"  # Optional, if not in PATH

# --- Option 2: Google Cloud Vision (Cloud - 1000 free/month) ---
# Setup: https://cloud.google.com/vision/docs/setup
# OCR_PROVIDER="google"
# GOOGLE_APPLICATION_CREDENTIALS="/path/to/service-account.json"

# --- Option 3: OCR.space (Cloud - 25000 free/month) ---
# Get key: https://ocr.space/ocrapi
# OCR_PROVIDER="ocrspace"
# OCR_API_KEY="..."

# ============================================
# CURRENCY API
# ============================================
# Choose ONE provider: frankfurter, openexchangerates, exchangerateapi

# --- Option 1: Frankfurter (FREE - No API key needed!) ---
# Docs: https://www.frankfurter.app/docs/
# 10000+ requests/day, all currencies supported
FX_PROVIDER="frankfurter"
FX_API_URL="https://api.frankfurter.app"

# --- Option 2: Open Exchange Rates (1000 free/month, USD base only) ---
# Get key: https://openexchangerates.org/signup/free
# FX_PROVIDER="openexchangerates"
# FX_API_KEY="..."

# --- Option 3: ExchangeRate-API (1500 free/month) ---
# Get key: https://www.exchangerate-api.com/
# FX_PROVIDER="exchangerateapi"
# FX_API_KEY="..."

# Cache TTL in milliseconds (default: 12 hours)
FX_CACHE_TTL_MS=43200000

# ============================================
# FILE STORAGE
# ============================================
# Directory for storing uploaded invoice files
# For production, consider using S3, GCS, or Supabase Storage
STORAGE_DIR="./uploads"

# Maximum file size in bytes (default: 10MB)
MAX_FILE_SIZE=10485760

# ============================================
# APPLICATION
# ============================================
# Server port
PORT=3000

# Environment: development, production, test
NODE_ENV=development

# CORS origins (comma-separated)
# Development: allow localhost
# Production: your frontend domain only
CORS_ORIGINS="http://localhost:3000,http://localhost:8080,http://localhost:*"

# ============================================
# OPTIONAL: SMTP (for custom auth emails)
# ============================================
# Only needed if you want custom email templates
# Otherwise, Supabase handles emails
# SMTP_HOST="smtp.sendgrid.net"
# SMTP_PORT=587
# SMTP_USER="apikey"
# SMTP_PASS="SG...."
# SMTP_FROM="noreply@invoiceme.app"
